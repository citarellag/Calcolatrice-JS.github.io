<!DOCTYPE html>
<html lang="it">
  <head>
    <link href="..\Programs CSS\patternPrograms.css" rel="stylesheet">
    <title>Convertitore Velocità - Calcolatrice</title>
  <head>
  <body>

    <ul>
      <li class="dropdown">
        <a href="javascript:void(0)" class="dropbtn">Matematica di base</a>
        <div class="dropdown-content">
          <a href="potenzaRadice.html" >Potenze e Radici</a>
          <a href="percentuale.html" >Percentuale</a>
        </div>
      </li>

      <li class="dropdown">
        <a href="javascript:void(0)" class="dropbtn">Algebra</a>
        <div class="dropdown-content">
          <a href="matrice2x2.html">Matrice2x2</a>
          <a href="matrice3x3.html">Matrice3x3</a>
          <a href="cramer2x2.html">Cramer2x2</a>
          <a href="cramer3x3.html">Cramer3x3</a>
          <a href="random.html">Random</a>
          <a href="sincostan.html">Seno, Coseno, Tangente</a>
        </div>
      </li>

      <li class="dropdown">
        <a href="javascript:void(0)" class="dropbtn">Fisica</a>
        <div class="dropdown-content">
          <a href="equivalenze.html" >Equivalenze</a>
          <a href="massa.html">Massa</a>
        </div>
      </li>

      <li class="dropdown">
        <a href="javascript:void(0)" class="dropbtn">Home</a>
        <div class="dropdown-content">
          <a href="indexRed.html">Rosso</a>
          <a href="indexBlue.html">Blu</a>
          <a href="..\index.html">Grigio</a>
        </div>
      </li>

      <li class="dropdown">
        <a href="javascript:void(0)" class="dropbtn">Help</a>
        <div class="dropdown-content">
          <a href="about.html" >About</a>
        </div>
      </li>
      
    </ul>

    <br>
    <br>
    <div class="TitlePrograms">
      <h1>Convertitore Velocità</h1>
    </div>

    <form id="cv">
      <h3>
        <label><input type="number" id="val" style="width: 90px;height: 90px;"  /></label>

        <div class="DDM">
          <select id="u_misura_m">
            <option value="" >Km</option>
            <option value="" >hm</option>
            <option value="" >dam</option>
            <option value="" selected="selected">m</option>
            <option value="" >dm</option>
            <option value="" >cm</option>
            <option value="" >mm</option>
          </select>
        </div>

        <div class="DIV">
          <p>/</p>
        </div>

        <div class="DDT">
          <select id="u_misura_t">
            <option value="" >y</option>
            <option value="" >d</option>
            <option value="" >h</option>
            <option value="" >min</option>
            <option value="" selected="selected">s</option>
          </select>
        </div>

        <div class="U_CV">
          <p>→</p>
        </div>

        <div class="DDMR">
          <select id="u_misura2_m">
            <option value="" selected="selected">Km</option>
            <option value="" >hm</option>
            <option value="" >dam</option>
            <option value="" >m</option>
            <option value="" >dm</option>
            <option value="" >cm</option>
            <option value="" >mm</option>
          </select>
        </div>

        <div class="DIVR">
          <p>/</p>
        </div>

        <div class="DDTR">
          <select id="u_misura2_t">
            <option value="" >y</option>
            <option value="" >d</option>
            <option value="" selected="selected">h</option>
            <option value="" >min</option>
            <option value="" >s</option>
          </select>
        </div>
      </h3>
    </form>

    <div class="result">
      <h2 id="ris_cv">Risultato: <span id="risultato_cv"></span></h2>
    </div>
    <button id="calc_vel">Calcola</button>
    <button id="reset_cv">Reset</button>

    <script>
      var timeValue = {
        "y" : 1*60*60*24*365,
        "d" : 1*60*60*24,
        "h" : 1*60*60,
        "min" : 1*60,
        "s" : 1
      }
      var distanceValue = {
        "Km" : 10**3,
        "hm" : 10**2,
        "dam" : 10,
        "m" : 1,
        "dm" : 10**(-1),
        "cm" : 10**(-2),
        "mm" : 10**(-3)
      }

      function copyToClipboard(id){
        var copyText = document.getElementById(id);
        var textArea = document.createElement("textArea")
        textArea.value = copyText.textContent.toString()
        document.body.appendChild(textArea)
        textArea.select();
        textArea.setSelectionRange(0, 99999)
        document.execCommand("copy");
        textArea.remove()
      }

      document.getElementById("calc_vel").addEventListener("click", function(e){
        var intValue = document.getElementById("val").valueAsNumber
        var firstSelectMeter = document.getElementById("u_misura_m").options[document.getElementById("u_misura_m").selectedIndex].text
        var firstSelectTime = document.getElementById("u_misura_t").options[document.getElementById("u_misura_t").selectedIndex].text
        var secondSelectMeter = document.getElementById("u_misura2_m").options[document.getElementById("u_misura2_m").selectedIndex].text
        var secondSelectTime = document.getElementById("u_misura2_t").options[document.getElementById("u_misura2_t").selectedIndex].text
        var outValue = ((intValue * distanceValue[firstSelectMeter]) / distanceValue[secondSelectMeter]) / (timeValue[firstSelectTime] / timeValue[secondSelectTime])
        document.getElementById("risultato_cv").innerHTML = outValue + " " + secondSelectMeter + "/" + secondSelectTime
        e.preventDefault()
      })
      
      document.getElementById("ris_cv").addEventListener("click", function(e){
        copyToClipboard("risultato_cv")
      })

      document.getElementById("reset_cv").addEventListener("click", function(e){
        document.getElementById("cv").reset()
        document.getElementById("risultato_cv").innerHTML = ""
      })
    </script>

  </body>
</html>